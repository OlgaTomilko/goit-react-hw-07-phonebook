(this["webpackJsonpgoit-react-hw-07-phonebook"]=this["webpackJsonpgoit-react-hw-07-phonebook"]||[]).push([[0],{58:function(t,e,n){},79:function(t,e,n){},80:function(t,e,n){},81:function(t,e,n){"use strict";n.r(e);var c,o,r=n(0),a=n.n(r),i=n(11),u=n.n(i),s=n(13),l=n(27),d=n(4),b=n(46),j=n.n(b),f=n(14),O=n(5),h=n(6),p=Object(d.b)("contacts/fetchContactRequest"),m=Object(d.b)("contacts/fetchContactSuccess"),g=Object(d.b)("contacts/fetchContactError"),v=Object(d.b)("contacts/addContactRequest"),x=Object(d.b)("contacts/addContactSuccess"),C=Object(d.b)("contacts/addContactError"),y=Object(d.b)("contacts/deleteContactRequest"),w=Object(d.b)("contacts/deleteContactSuccess"),k=Object(d.b)("contacts/deleteContactError"),M=Object(d.b)("phonebook/Update_filter"),L=Object(d.c)([],(c={},Object(O.a)(c,m,(function(t,e){return e.payload})),Object(O.a)(c,x,(function(t,e){var n=e.payload;return[].concat(Object(l.a)(t),[n])})),Object(O.a)(c,w,(function(t,e){var n=e.payload;return t.filter((function(t){return t.id!==Number(n)}))})),c)),D=Object(d.c)(!1,(o={},Object(O.a)(o,p,(function(){return!0})),Object(O.a)(o,m,(function(){return!1})),Object(O.a)(o,g,(function(){return!1})),Object(O.a)(o,v,(function(){return!0})),Object(O.a)(o,x,(function(){return!1})),Object(O.a)(o,C,(function(){return!1})),Object(O.a)(o,y,(function(){return!0})),Object(O.a)(o,w,(function(){return!1})),Object(O.a)(o,k,(function(){return!1})),o)),E=Object(d.c)("",Object(O.a)({},M,(function(t,e){return e.payload}))),A=Object(h.c)({items:L,filter:E,loading:D}),N=[].concat(Object(l.a)(Object(d.d)({serializableCheck:{ignoredActions:[f.a,f.f,f.b,f.c,f.d,f.e]}})),[j.a]),F=Object(d.a)({reducer:{contacts:A},middleware:N,devTools:!1}),S=(n(58),n(23)),_=n(24),q=n(29),R=n(28),z=n(33),B=n(22),K=function(t){return t.contacts.items},T=function(t){return t.contacts.filter},U={getContacts:K,getFilter:T,getLoading:function(t){return console.log(t.contacts.loading),t.contacts.loading},getVisibleContacts:Object(B.a)([K,T],(function(t,e){var n=e.toLowerCase();return t.filter((function(t){return t.name.toLowerCase().includes(n)}))}))},J=n(34),P=n.n(J),V=n(47),I=n(21),W=n.n(I);W.a.defaults.baseURL="http://localhost:4040";var G=function(t){var e=t.name,n=t.number;return function(t){var c={name:e,number:n};t(v()),W.a.post("/contacts",c).then((function(e){var n=e.data;return t(x(n))})).catch((function(e){return t(C(e))}))}},H=function(t){return function(e){e(y()),W.a.delete("/contacts/".concat(t)).then((function(){return e(w(t))})).catch((function(t){return e(k(t))}))}},Q=function(){return function(){var t=Object(V.a)(P.a.mark((function t(e){var n,c;return P.a.wrap((function(t){for(;;)switch(t.prev=t.next){case 0:return e(p()),t.prev=1,t.next=4,W.a.get("/contacts");case 4:n=t.sent,c=n.data,e(m(c)),t.next=12;break;case 9:t.prev=9,t.t0=t.catch(1),e(g(t.t0));case 12:case"end":return t.stop()}}),t,null,[[1,9]])})));return function(e){return t.apply(this,arguments)}}()},X=n(96),Y=n(98),Z=n(2),$=Object(X.a)({form:{width:275,height:150,display:"flex",flexDirection:"column",justifyContent:"space-around"}}),tt=Object(s.b)((function(t){return{contacts:U.getContacts(t)}}),(function(t){return{onAdd:function(e){return t(G(e))}}}))((function(t){var e=t.contacts,n=t.onAdd,c=$(),o={name:"",number:""},r=function(t){o=Object(z.a)(Object(z.a)({},o),{},Object(O.a)({},t.target.id,t.target.value))};return Object(Z.jsxs)("form",{className:c.form,children:[Object(Z.jsx)("label",{children:"Name"}),Object(Z.jsx)("input",{type:"text",onChange:r,id:"name"}),Object(Z.jsx)("label",{children:"Number"}),Object(Z.jsx)("input",{type:"text",onChange:r,id:"number"}),Object(Z.jsx)(Y.a,{variant:"contained",color:"primary",size:"small",type:"button",onClick:function(){e.map((function(t){return t.name})).includes(o.name)?alert("".concat(o.name," is already in contacts.")):n(o)},children:"Add contact"})]})})),et=Object(s.b)(null,(function(t){return{updateFilter:function(e){return t(M(e.target.value))}}}))((function(t){var e=t.updateFilter;return Object(Z.jsxs)("div",{children:[Object(Z.jsx)("p",{children:"Find contacts by name"}),Object(Z.jsx)("input",{type:"text",onChange:e,id:"find"})]})})),nt=Object(s.b)((function(t){return{contacts:U.getVisibleContacts(t),filter:U.getFilter(t),isLoading:U.getLoading(t)}}),(function(t){return{fetchContacts:function(){return t(Q())},onDelete:function(e){return t(H(e))}}}))((function(t){var e=t.contacts,n=t.isLoading,c=t.onDelete,o=t.onClose,a=t.fetchContacts;Object(r.useEffect)((function(){return a()}),[]);var i=function(t){c(t.currentTarget.id),o()};return Object(Z.jsxs)(Z.Fragment,{children:[n&&Object(Z.jsx)("p",{children:"Loading..."}),Object(Z.jsx)("ul",{children:e.map((function(t){var e=t.id,n=t.name,c=t.number;return Object(Z.jsxs)("li",{children:[n,": ",c,Object(Z.jsx)(Y.a,{color:"secondary",type:"button",id:e,onClick:i,children:"Delete"})]},e)}))})]})})),ct=(n(79),document.querySelector("#modal-root")),ot=function(t){Object(q.a)(n,t);var e=Object(R.a)(n);function n(){var t;Object(S.a)(this,n);for(var c=arguments.length,o=new Array(c),r=0;r<c;r++)o[r]=arguments[r];return(t=e.call.apply(e,[this].concat(o))).handleKeyDown=function(e){"Escape"===e.code&&t.props.onClose()},t.handleBackdropClick=function(e){e.target===e.currentTarget&&t.props.onClose()},t}return Object(_.a)(n,[{key:"componentDidMount",value:function(){window.addEventListener("keydown",this.handleKeyDown)}},{key:"componentWillUnmount",value:function(){window.removeEventListener("keydown",this.handleKeyDown)}},{key:"render",value:function(){return Object(i.createPortal)(Object(Z.jsx)("div",{className:"Modal__backdrop",onClick:this.handleBackdropClick,children:Object(Z.jsx)("div",{className:"Modal__content",children:this.props.children})}),ct)}}]),n}(r.Component),rt=function(t){Object(q.a)(n,t);var e=Object(R.a)(n);function n(){var t;Object(S.a)(this,n);for(var c=arguments.length,o=new Array(c),r=0;r<c;r++)o[r]=arguments[r];return(t=e.call.apply(e,[this].concat(o))).state={showModal:!1},t.toggleModal=function(){t.setState((function(t){return{showModal:!t.showModal}}))},t}return Object(_.a)(n,[{key:"render",value:function(){return Object(Z.jsxs)("div",{children:[this.state.showModal&&Object(Z.jsxs)(ot,{onClose:this.toggleModal,children:[Object(Z.jsx)("h1",{children:"\u041a\u043e\u043d\u0442\u0430\u043a\u0442 \u0443\u0434\u0430\u043b\u0435\u043d"}),Object(Z.jsx)(Y.a,{variant:"contained",color:"primary",size:"small",type:"button",onClick:this.toggleModal,children:"\u0417\u0430\u043a\u0440\u044b\u0442\u044c"})]}),Object(Z.jsx)("h1",{children:"Phonebook"}),Object(Z.jsx)(tt,{}),Object(Z.jsx)("h2",{children:"Contacts"}),Object(Z.jsx)(et,{}),Object(Z.jsx)(nt,{onClose:this.toggleModal})]})}}]),n}(r.Component);var at=function(){return Object(Z.jsx)("div",{className:"App",children:Object(Z.jsx)(rt,{})})};n(80);u.a.render(Object(Z.jsx)(a.a.StrictMode,{children:Object(Z.jsx)(s.a,{store:F,children:Object(Z.jsx)(at,{})})}),document.getElementById("root"))}},[[81,1,2]]]);
//# sourceMappingURL=main.6ef62758.chunk.js.map